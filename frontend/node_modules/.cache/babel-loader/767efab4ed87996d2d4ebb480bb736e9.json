{"ast":null,"code":"var _jsxFileName = \"/Users/mandyhe/cs0320/term-project-awhite35-mcamach6-mhe26-pmontei1/frontend/src/pages/EditProfile.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport ProfilePic from \"../components/ProfilePic\";\nimport { Link } from \"react-router-dom\";\nimport \"./editProfile.css\";\nimport \"../App.css\";\nimport firebase from \"firebase\";\nimport { Redirect } from 'react-router-dom';\nimport Auth from \"firebase\";\nimport TextBox from \"../components/TextBox\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction EditProfile(props) {\n  _s();\n\n  //let user = props.user\n  const [deleteAccount, setDeleteAccount] = useState(false);\n  const [newEmail, setNewEmail] = useState(\"\");\n  const [newName, setNewName] = useState(\"\");\n  const [newPassword, setNewPassword] = useState(\"\");\n  const [newPicURL, setNewPicURL] = useState(null); // const [emailError, setEmailError] = useState('')\n  // const [logMessage, setLogMessage] = useState('')\n\n  const [logMessage, setLogMessage] = useState(''); //https://www.youtube.com/watch?v=31MVIwvstzs&ab_channel=SoftAuthor -> change profile\n\n  let user = Auth.auth().currentUser;\n  const db = firebase.firestore();\n\n  const clearInputs = () => {\n    setNewName('');\n    setNewEmail('');\n    setNewPassword('');\n  };\n\n  const clearErrors = () => {\n    setLogMessage('');\n    setLogMessage('');\n  }; // const removeUserAndData = () => {\n  //     // //remove user data\n  //     // db.collection(\"users\").document(user.uid).delete();\n  //     // remove account\n  //     user.delete().then(function() {\n  //         console.log(\"user successfully deleted\")\n  //     }).catch(function(error) {\n  //         console.log(\"user was not successfully deleted\"+      error)\n  //     });\n  //     setDeleteAccount(true);\n  // }\n\n\n  const removeUserAndData = () => {};\n\n  const updateProfile = () => {\n    updateEmail();\n    updatePassword();\n    user.updateProfile({\n      displayName: newName !== \"\" ? newName : user.displayName\n    }).then(function () {\n      console.log(\"user successfully updated:  \" + logMessage);\n      console.log(user); // newPassword ? user.updatePassword(newPassword) : null;\n      // newEmail ? user.updateEmail(newEmail) : null;\n    }).catch(function (error) {\n      console.log(error);\n      console.log(user);\n      console.log(firebase.storage().ref('users/' + user.uid + '/profile.jpg').getDownloadURL());\n    });\n    clearInputs();\n  }; // useEffect(() => {\n  //     firebase.storage().ref('users/' + user.uid +'/profile.jpg').put(newPicURL);\n  //     setLogMessage(\"user image updated\")\n  //     updateProfile();\n  //     }, [newPicURL]);\n\n\n  function updatePassword() {\n    if (newPassword !== \"\") user.updatePassword(newPassword).then(r => console.log(r + \":user successfully updated password\")).catch(err => {\n      switch (err.code) {\n        case \"auth/weak-password\":\n          setLogMessage(err.message);\n          break;\n      }\n    });\n  }\n\n  function updateEmail() {\n    if (newEmail !== \"\") user.updateEmail(newEmail).then(r => {\n      console.log(r + \":user successfully updated Email\");\n      setLogMessage(logMessage + \"<br>\" + \"user successfully updated Email \" + newEmail);\n    }).catch(err => {\n      switch (err.code) {\n        case \"auth/email-already-in-use\":\n        case \"auth/invalid-email\":\n          console.log(err.message);\n          setLogMessage(err.message);\n          break;\n      }\n    });\n  }\n\n  const profilePicRef = firebase.storage().ref('users/' + user.uid + '/profile.jpg'); //TODO:\n  //sources: https://stackoverflow.com/questions/45386065/firebase-user-photourl-to-string\n  // https://www.youtube.com/watch?v=31MVIwvstzs&ab_channel=SoftAuthor\n\n  function getNewPicUrl(e) {\n    setNewPicURL(e.target.files[0]);\n    profilePicRef.put(e.target.files[0]).then(function (snapshot) {\n      console.log(snapshot);\n      snapshot.ref.getDownloadURL().then(function (url) {\n        // Now I can use url\n        user.updateProfile({\n          photoURL: url // <- URL from uploaded photo.\n\n        }).then(r => {\n          setLogMessage(\"user image updated\" + r);\n        });\n      });\n    });\n    console.log(\"user image updated\"); //updateProfile();\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile\",\n      children: [/*#__PURE__*/_jsxDEV(ProfilePic, {\n        user: user,\n        className: \"profilePicLarge\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"Edit Profile Image:  \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        id: \"myFile\",\n        onChange: e => getNewPicUrl(e)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 22\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Name: \", user.displayName]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Edit User Information\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TextBox, {\n        type: \"text\",\n        label: \"Change name \",\n        focus: false,\n        value: newName,\n        change: setNewName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TextBox, {\n        type: \"text\",\n        label: \"Change email \",\n        focus: false,\n        value: newEmail,\n        change: setNewEmail\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TextBox, {\n        type: \"text\",\n        label: \"Change password \",\n        focus: false,\n        value: newPassword,\n        change: setNewPassword\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => updateProfile(),\n        children: \"Submit changes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 22\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: logMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => removeUserAndData(),\n        children: \"Delete  Account\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }, this), deleteAccount ? /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 34\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 9\n  }, this);\n}\n\n_s(EditProfile, \"bRdghUvZ+6UOW+HOR8t2mxOkwTk=\");\n\n_c = EditProfile;\nexport default EditProfile;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditProfile\");","map":{"version":3,"sources":["/Users/mandyhe/cs0320/term-project-awhite35-mcamach6-mhe26-pmontei1/frontend/src/pages/EditProfile.js"],"names":["React","useState","useEffect","ProfilePic","Link","firebase","Redirect","Auth","TextBox","EditProfile","props","deleteAccount","setDeleteAccount","newEmail","setNewEmail","newName","setNewName","newPassword","setNewPassword","newPicURL","setNewPicURL","logMessage","setLogMessage","user","auth","currentUser","db","firestore","clearInputs","clearErrors","removeUserAndData","updateProfile","updateEmail","updatePassword","displayName","then","console","log","catch","error","storage","ref","uid","getDownloadURL","r","err","code","message","profilePicRef","getNewPicUrl","e","target","files","put","snapshot","url","photoURL"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport ProfilePic from \"../components/ProfilePic\";\nimport {Link} from \"react-router-dom\";\nimport \"./editProfile.css\"\nimport \"../App.css\"\nimport firebase from \"firebase\";\nimport { Redirect } from 'react-router-dom'\nimport Auth from \"firebase\";\nimport TextBox from \"../components/TextBox\";\n\nfunction EditProfile(props) {\n    //let user = props.user\n    const [deleteAccount, setDeleteAccount] = useState(false);\n    const [newEmail, setNewEmail] = useState(\"\")\n    const [newName, setNewName] = useState(\"\")\n    const [newPassword, setNewPassword] = useState(\"\")\n    const [newPicURL, setNewPicURL] = useState(null)\n    // const [emailError, setEmailError] = useState('')\n    // const [logMessage, setLogMessage] = useState('')\n    const [logMessage, setLogMessage] = useState('')\n//https://www.youtube.com/watch?v=31MVIwvstzs&ab_channel=SoftAuthor -> change profile\n\n    let user = Auth.auth().currentUser\n    const db = firebase.firestore();\n\n    const clearInputs = () => {\n        setNewName('');\n        setNewEmail('');\n        setNewPassword('');\n    }\n\n\n    const clearErrors = () => {\n        setLogMessage('');\n        setLogMessage('');\n    }\n\n    // const removeUserAndData = () => {\n    //     // //remove user data\n    //     // db.collection(\"users\").document(user.uid).delete();\n    //     // remove account\n    //     user.delete().then(function() {\n    //         console.log(\"user successfully deleted\")\n    //     }).catch(function(error) {\n    //         console.log(\"user was not successfully deleted\"+      error)\n    //     });\n    //     setDeleteAccount(true);\n    // }\n\n    const removeUserAndData = () => {\n       \n    }\n\n    const updateProfile = () => {\n        updateEmail();\n        updatePassword();\n        user.updateProfile({\n            displayName: newName !== \"\" ? newName: user.displayName,\n        }).then(function() {\n            console.log(\"user successfully updated:  \" + logMessage)\n            console.log(user)\n            // newPassword ? user.updatePassword(newPassword) : null;\n            // newEmail ? user.updateEmail(newEmail) : null;\n        }).catch(function(error) {\n            console.log( error)\n            console.log(user)\n            console.log(firebase.storage().ref('users/' + user.uid +'/profile.jpg').getDownloadURL())\n        });\n        clearInputs();\n    }\n\n    // useEffect(() => {\n    //     firebase.storage().ref('users/' + user.uid +'/profile.jpg').put(newPicURL);\n    //     setLogMessage(\"user image updated\")\n    //     updateProfile();\n    //     }, [newPicURL]);\n\n    function updatePassword() {\n        if (newPassword !== \"\")\n            user.updatePassword(newPassword)\n                .then(r =>  console.log(r + \":user successfully updated password\"))\n                .catch(err => {\n                    switch(err.code) {\n                        case \"auth/weak-password\":\n                            setLogMessage(err.message);\n                            break;\n                    }\n                });\n    }\n    function updateEmail() {\n        if (newEmail !== \"\")\n                    user.updateEmail(newEmail)\n                        .then(r =>  {\n                            console.log(r + \":user successfully updated Email\")\n                            setLogMessage(logMessage + \"<br>\" + \"user successfully updated Email \" + newEmail)\n                        })\n                        .catch(err => {\n                            switch(err.code) {\n                                case \"auth/email-already-in-use\":\n                                case \"auth/invalid-email\":\n                                    console.log(err.message)\n                                    setLogMessage(err.message);\n                                    break;\n                            }\n                        });\n    }\n\n    const profilePicRef = firebase.storage().ref('users/' + user.uid +'/profile.jpg')\n//TODO:\n    //sources: https://stackoverflow.com/questions/45386065/firebase-user-photourl-to-string\n    // https://www.youtube.com/watch?v=31MVIwvstzs&ab_channel=SoftAuthor\n    function getNewPicUrl(e) {\n        setNewPicURL(e.target.files[0]);\n        profilePicRef.put(e.target.files[0])\n            .then(function(snapshot) {\n                console.log(snapshot)\n                snapshot.ref.getDownloadURL()\n                    .then(function(url) {  // Now I can use url\n                        user.updateProfile({\n                            photoURL: url       // <- URL from uploaded photo.\n                        }).then(r => {\n                            setLogMessage(\"user image updated\" + r)\n                        });\n                    })\n            })\n        console.log(\"user image updated\")\n        //updateProfile();\n    }\n\n    return (\n        <div className=\"main\">\n            <div className=\"profile\" >\n                <ProfilePic user={user} className={\"profilePicLarge\"}/>\n                <br/>\n                <b>Edit Profile Image:  </b>\n               <input type=\"file\" id=\"myFile\" onChange={(e)=>getNewPicUrl(e)}/>\n                <br/><br/>\n\n               <h1>Name: {user.displayName}</h1>\n                <hr/>\n\n                <h2>Edit User Information</h2>\n                <TextBox type={\"text\"} label={\"Change name \"} focus={false} value={newName} change={setNewName}/>\n                <TextBox type={\"text\"} label={\"Change email \"} focus={false} value={newEmail} change={setNewEmail}/>\n                <TextBox type={\"text\"} label={\"Change password \"} focus={false} value={newPassword} change={setNewPassword}/>\n                <button onClick={()=>updateProfile()}>Submit changes</button>\n                <br/><br/>\n                <p>{logMessage}</p>\n                <button onClick={() => removeUserAndData()}>Delete  Account</button>\n                {deleteAccount ? <Redirect to=\"/Login\" /> : null}\n            </div>\n        </div>\n    )\n}\n\nexport default EditProfile"]},"metadata":{},"sourceType":"module"}