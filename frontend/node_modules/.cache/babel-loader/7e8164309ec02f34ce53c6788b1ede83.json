{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\17738\\\\Desktop\\\\cs0320\\\\term-project-awhite35-mcamach6-mhe26-pmontei1\\\\frontend\\\\src\\\\Alana_stuff\\\\SurveyAdmin.js\",\n    _s = $RefreshSig$();\n\nimport Option from \"./Option\";\nimport React, { useState, useEffect } from 'react';\nimport axios from \"axios\";\nimport firebase from \"firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction SurveyAdmin(props) {\n  _s();\n\n  const [title, setTitle] = useState(\"loading...\");\n  const db = firebase.firestore(); // EDIT THIS DEPENDING ON WHAT SURVEY IS NEEDED.\n\n  const currentPoll = \"labpartners\";\n\n  const generatePairs = async () => {\n    let allQuestions = (await db.collection(\"surveys\").doc(currentPoll).collection(\"questions\").orderBy(\"questionnumber\").get()).docs.map(d => d.data());\n    let answers = (await db.collection(\"surveys\").doc(currentPoll).collection(\"responses\").orderBy(\"userID\").get()).docs.map(d => d.data()); // assumes that responses array has the index represent question id and value represent which answer\n    // was picked\n\n    const toSend = {\n      questions: allQuestions,\n      answers: answers\n    };\n    let config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        'Access-Control-Allow-Origin': '*'\n      }\n    };\n    axios.post(\"http://localhost:4567/match\", toSend, config).then(response => {\n      let resp = response.data[\"pairs\"];\n      console.log(resp);\n    }).catch(error => {\n      console.log(error);\n    });\n  }; // sets any info needed for survey\n\n\n  const loadInfo = async () => {\n    const doc = await db.collection(\"surveys\").doc(currentPoll).get();\n    setTitle(doc.data().title);\n  }; // on page load, load in the survey\n\n\n  useEffect(() => {\n    loadInfo();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"poll\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      children: \"Current Survey Results\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      onClick: generatePairs,\n      children: \"Click for Pairs\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 9\n  }, this);\n}\n\n_s(SurveyAdmin, \"bCH6IL1+dGXP7G91naTJvrdNa/0=\");\n\n_c = SurveyAdmin;\nexport default SurveyAdmin;\n\nvar _c;\n\n$RefreshReg$(_c, \"SurveyAdmin\");","map":{"version":3,"sources":["C:/Users/17738/Desktop/cs0320/term-project-awhite35-mcamach6-mhe26-pmontei1/frontend/src/Alana_stuff/SurveyAdmin.js"],"names":["Option","React","useState","useEffect","axios","firebase","SurveyAdmin","props","title","setTitle","db","firestore","currentPoll","generatePairs","allQuestions","collection","doc","orderBy","get","docs","map","d","data","answers","toSend","questions","config","headers","post","then","response","resp","console","log","catch","error","loadInfo"],"mappings":";;;AAAA,OAAOA,MAAP,MAAmB,UAAnB;AACA,OAAOC,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,UAArB;;;AAEA,SAASC,WAAT,CAAqBC,KAArB,EAA4B;AAAA;;AAExB,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBP,QAAQ,CAAC,YAAD,CAAlC;AACA,QAAMQ,EAAE,GAAGL,QAAQ,CAACM,SAAT,EAAX,CAHwB,CAIxB;;AACA,QAAMC,WAAW,GAAG,aAApB;;AAEA,QAAMC,aAAa,GAAG,YAAY;AAC9B,QAAIC,YAAY,GAAG,CAAC,MAAMJ,EAAE,CAACK,UAAH,CAAc,SAAd,EAAyBC,GAAzB,CAA6BJ,WAA7B,EAA0CG,UAA1C,CAAqD,WAArD,EAAkEE,OAAlE,CAA0E,gBAA1E,EAA4FC,GAA5F,EAAP,EAA0GC,IAA1G,CAA+GC,GAA/G,CAAmHC,CAAC,IAAIA,CAAC,CAACC,IAAF,EAAxH,CAAnB;AACA,QAAIC,OAAO,GAAG,CAAC,MAAMb,EAAE,CAACK,UAAH,CAAc,SAAd,EAAyBC,GAAzB,CAA6BJ,WAA7B,EAA0CG,UAA1C,CAAqD,WAArD,EAAkEE,OAAlE,CAA0E,QAA1E,EAAoFC,GAApF,EAAP,EAAkGC,IAAlG,CAAuGC,GAAvG,CAA2GC,CAAC,IAAIA,CAAC,CAACC,IAAF,EAAhH,CAAd,CAF8B,CAI9B;AACA;;AACA,UAAME,MAAM,GAAG;AACXC,MAAAA,SAAS,EAAEX,YADA;AAEXS,MAAAA,OAAO,EAAEA;AAFE,KAAf;AAKA,QAAIG,MAAM,GAAG;AACTC,MAAAA,OAAO,EAAE;AACL,wBAAgB,kBADX;AAEL,uCAA+B;AAF1B;AADA,KAAb;AAOAvB,IAAAA,KAAK,CAACwB,IAAN,CACI,6BADJ,EAEIJ,MAFJ,EAGIE,MAHJ,EAIEG,IAJF,CAIOC,QAAQ,IAAI;AACf,UAAIC,IAAI,GAAGD,QAAQ,CAACR,IAAT,CAAc,OAAd,CAAX;AACAU,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AAEH,KARD,EAQGG,KARH,CAQSC,KAAK,IAAI;AACdH,MAAAA,OAAO,CAACC,GAAR,CAAYE,KAAZ;AACH,KAVD;AAWH,GA7BD,CAPwB,CAsCxB;;;AACA,QAAMC,QAAQ,GAAG,YAAW;AACxB,UAAMpB,GAAG,GAAG,MAAMN,EAAE,CAACK,UAAH,CAAc,SAAd,EAAyBC,GAAzB,CAA6BJ,WAA7B,EAA0CM,GAA1C,EAAlB;AACAT,IAAAA,QAAQ,CAACO,GAAG,CAACM,IAAJ,GAAWd,KAAZ,CAAR;AACH,GAHD,CAvCwB,CA4CxB;;;AACAL,EAAAA,SAAS,CAAC,MAAM;AACZiC,IAAAA,QAAQ;AACX,GAFQ,EAEN,EAFM,CAAT;AAKA,sBACI;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA,4BACI;AAAA,gBAAK5B;AAAL;AAAA;AAAA;AAAA;AAAA,YADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFJ,eAGI;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,OAAO,EAAEK,aAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAOH;;GAzDQP,W;;KAAAA,W;AA2DT,eAAeA,WAAf","sourcesContent":["import Option from \"./Option\";\r\nimport React, {useState, useEffect} from 'react';\r\nimport axios from \"axios\";\r\nimport firebase from \"firebase\";\r\n\r\nfunction SurveyAdmin(props) {\r\n\r\n    const [title, setTitle] = useState(\"loading...\");\r\n    const db = firebase.firestore();\r\n    // EDIT THIS DEPENDING ON WHAT SURVEY IS NEEDED.\r\n    const currentPoll = \"labpartners\";\r\n\r\n    const generatePairs = async () => {\r\n        let allQuestions = (await db.collection(\"surveys\").doc(currentPoll).collection(\"questions\").orderBy(\"questionnumber\").get()).docs.map(d => d.data());\r\n        let answers = (await db.collection(\"surveys\").doc(currentPoll).collection(\"responses\").orderBy(\"userID\").get()).docs.map(d => d.data());\r\n\r\n        // assumes that responses array has the index represent question id and value represent which answer\r\n        // was picked\r\n        const toSend = {\r\n            questions: allQuestions,\r\n            answers: answers\r\n        };\r\n\r\n        let config = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                'Access-Control-Allow-Origin': '*',\r\n            }\r\n        };\r\n\r\n        axios.post(\r\n            \"http://localhost:4567/match\",\r\n            toSend,\r\n            config\r\n        ).then(response => {\r\n            let resp = response.data[\"pairs\"];\r\n            console.log(resp);\r\n\r\n        }).catch(error => {\r\n            console.log(error);\r\n        });\r\n    }\r\n\r\n    // sets any info needed for survey\r\n    const loadInfo = async() => {\r\n        const doc = await db.collection(\"surveys\").doc(currentPoll).get();\r\n        setTitle(doc.data().title);\r\n    }\r\n\r\n    // on page load, load in the survey\r\n    useEffect(() => {\r\n        loadInfo();\r\n    }, [])\r\n\r\n\r\n    return (\r\n        <div className=\"poll\">\r\n            <h1>{title}</h1>\r\n            <button>Current Survey Results</button>\r\n            <button type=\"button\" onClick={generatePairs}>Click for Pairs</button>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SurveyAdmin;"]},"metadata":{},"sourceType":"module"}