{"ast":null,"code":"var _jsxFileName = \"/Users/mandyhe/cs0320/term-project-awhite35-mcamach6-mhe26-pmontei1/frontend/src/pages/EditProfile.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport ProfilePic from \"../components/ProfilePic\";\nimport { Link } from \"react-router-dom\";\nimport \"./editProfile.css\";\nimport firebase from \"firebase\";\nimport { Redirect } from 'react-router-dom';\nimport Auth from \"firebase\";\nimport TextBox from \"../components/TextBox\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction EditProfile(props) {\n  _s();\n\n  //let user = props.user\n  const [deleteAccount, setDeleteAccount] = useState(false);\n  const [newEmail, setNewEmail] = useState(\"\");\n  const [newName, setNewName] = useState(\"\");\n  const [newPassword, setNewPassword] = useState(\"\");\n  const [newPicURL, setNewPicURL] = useState(null);\n  const [emailError, setEmailError] = useState('');\n  const [logError, setLogError] = useState('');\n  const [logMessage, setLogMessage] = useState(''); //https://www.youtube.com/watch?v=31MVIwvstzs&ab_channel=SoftAuthor -> change profile\n\n  let user = Auth.auth().currentUser;\n  const db = firebase.firestore();\n\n  const removeUserAndData = () => {\n    // //remove user data\n    db.collection(\"users\").document(user.uid).delete(); // remove account\n\n    user.delete().then(function () {\n      console.log(\"user successfully deleted\");\n    }).catch(function (error) {\n      console.log(\"user was not successfully deleted\" + error);\n    });\n    setDeleteAccount(true);\n  };\n\n  const updateProfile = () => {\n    user.updateProfile({\n      displayName: newName !== \"\" ? newName : user.displayName,\n      photoURL: newPicURL\n    }).then(function () {\n      console.log(\"user successfully updated\"); // newPassword ? user.updatePassword(newPassword) : null;\n      // newEmail ? user.updateEmail(newEmail) : null;\n    }).catch(function (error) {\n      console.log(\"user not successfully updated\" + error);\n    });\n  };\n\n  useEffect(() => {\n    if (newEmail !== \"\") user.updateEmail(newEmail).then(r => console.log(r + \":user successfully updated Email\")).catch(err => {\n      switch (err.code) {\n        case \"auth/email-already-in-use\":\n        case \"auth/invalid-email\":\n          setLogError(err.message);\n          break;\n      }\n    });\n  }, [newPassword]);\n  useEffect(() => {\n    if (newPassword !== \"\") user.updatePassword(newPassword).then(r => console.log(r + \":user successfully updated password\")).catch(err => {\n      switch (err.code) {\n        case \"auth/weak-password\":\n          setPasswordError(err.message);\n          break;\n      }\n    });\n  }, [newEmail]);\n\n  function getNewPicUrl(e) {\n    setNewPicURL(e.target.files[0]);\n    updateProfile();\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => removeUserAndData(),\n      children: \"Delete  Account\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this), deleteAccount ? /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 30\n    }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile\",\n      children: [/*#__PURE__*/_jsxDEV(ProfilePic, {\n        user: user,\n        className: \"profilePicLarge\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"Edit Profile Image:  \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        id: \"myFile\",\n        onChange: e => getNewPicUrl(e)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 22\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Name: \", user.displayName]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        children: \"Edit User Information\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TextBox, {\n        type: \"text\",\n        label: \"Change name: \",\n        focus: false,\n        value: newName,\n        change: setNewName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TextBox, {\n        type: \"text\",\n        label: \"Change email: \",\n        focus: false,\n        value: newEmail,\n        change: setNewEmail\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TextBox, {\n        type: \"text\",\n        label: \"Change password: \",\n        focus: false,\n        value: newPassword,\n        change: setNewPassword\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => updateProfile(),\n        children: \"Submit changes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 22\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 9\n  }, this);\n}\n\n_s(EditProfile, \"EJ6xz3b25CgiscRe5kYJRki5Yq4=\");\n\n_c = EditProfile;\nexport default EditProfile;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditProfile\");","map":{"version":3,"sources":["/Users/mandyhe/cs0320/term-project-awhite35-mcamach6-mhe26-pmontei1/frontend/src/pages/EditProfile.js"],"names":["React","useState","useEffect","ProfilePic","Link","firebase","Redirect","Auth","TextBox","EditProfile","props","deleteAccount","setDeleteAccount","newEmail","setNewEmail","newName","setNewName","newPassword","setNewPassword","newPicURL","setNewPicURL","emailError","setEmailError","logError","setLogError","logMessage","setLogMessage","user","auth","currentUser","db","firestore","removeUserAndData","collection","document","uid","delete","then","console","log","catch","error","updateProfile","displayName","photoURL","updateEmail","r","err","code","message","updatePassword","setPasswordError","getNewPicUrl","e","target","files"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport ProfilePic from \"../components/ProfilePic\";\nimport {Link} from \"react-router-dom\";\nimport \"./editProfile.css\"\nimport firebase from \"firebase\";\nimport { Redirect } from 'react-router-dom'\nimport Auth from \"firebase\";\nimport TextBox from \"../components/TextBox\";\n\nfunction EditProfile(props) {\n    //let user = props.user\n    const [deleteAccount, setDeleteAccount] = useState(false);\n    const [newEmail, setNewEmail] = useState(\"\")\n    const [newName, setNewName] = useState(\"\")\n    const [newPassword, setNewPassword] = useState(\"\")\n    const [newPicURL, setNewPicURL] = useState(null)\n    const [emailError, setEmailError] = useState('')\n    const [logError, setLogError] = useState('')\n    const [logMessage, setLogMessage] = useState('')\n//https://www.youtube.com/watch?v=31MVIwvstzs&ab_channel=SoftAuthor -> change profile\n\n    let user = Auth.auth().currentUser\n    const db = firebase.firestore();\n\n    const removeUserAndData = () => {\n        // //remove user data\n         db.collection(\"users\").document(user.uid).delete();\n        // remove account\n        user.delete().then(function() {\n            console.log(\"user successfully deleted\")\n        }).catch(function(error) {\n            console.log(\"user was not successfully deleted\"+      error)\n        });\n        setDeleteAccount(true);\n    }\n\n    const updateProfile = () => {\n        user.updateProfile({\n            displayName: newName !== \"\" ? newName: user.displayName,\n            photoURL: newPicURL\n        }).then(function() {\n            console.log(\"user successfully updated\")\n            // newPassword ? user.updatePassword(newPassword) : null;\n            // newEmail ? user.updateEmail(newEmail) : null;\n        }).catch(function(error) {\n            console.log(\"user not successfully updated\"+  error)\n        });\n\n    }\n    useEffect(() => {\n        if (newEmail !== \"\")\n            user.updateEmail(newEmail)\n                .then(r =>  console.log(r + \":user successfully updated Email\"))\n                .catch(err => {\n                    switch(err.code) {\n                        case \"auth/email-already-in-use\":\n                        case \"auth/invalid-email\":\n                            setLogError(err.message);\n                            break;\n                    }\n                });\n        }, [newPassword]);\n\n    useEffect(() => {\n        if (newPassword !== \"\")\n            user.updatePassword(newPassword)\n                .then(r =>  console.log(r + \":user successfully updated password\"))\n                .catch(err => {\n                    switch(err.code) {\n                        case \"auth/weak-password\":\n                            setPasswordError(err.message);\n                            break;\n                    }\n                });\n    }, [newEmail]);\n\n    function getNewPicUrl(e) {\n        setNewPicURL(e.target.files[0])\n        updateProfile();\n    }\n\n    return (\n        <div>\n            <button onClick={() => removeUserAndData()}>Delete  Account</button>\n            {deleteAccount ? <Redirect to=\"/Login\" /> : null}\n            <div className=\"profile\" >\n                <ProfilePic user={user} className={\"profilePicLarge\"}/>\n                <br/>\n                <b>Edit Profile Image:  </b>\n               <input type=\"file\" id=\"myFile\" onChange={(e)=>getNewPicUrl(e)}/>\n                <br/><br/>\n\n               <h1>Name: {user.displayName}</h1>\n                <button>Edit User Information</button>\n                <TextBox type={\"text\"} label={\"Change name: \"} focus={false} value={newName} change={setNewName}/>\n                <TextBox type={\"text\"} label={\"Change email: \"} focus={false} value={newEmail} change={setNewEmail}/>\n                <TextBox type={\"text\"} label={\"Change password: \"} focus={false} value={newPassword} change={setNewPassword}/>\n                <button onClick={()=>updateProfile()}>Submit changes</button>\n                <br/><br/>\n\n\n            </div>\n        </div>\n    )\n}\n\nexport default EditProfile"]},"metadata":{},"sourceType":"module"}